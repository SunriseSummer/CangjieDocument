# 第二章：传感器数据 (变量与类型)

> 系统启动后，首要任务是感知环境。我们需要从各类传感器读取数据（温度、湿度、状态），并将其存储在内存中，为后续决策提供依据。

## 本章目标

*   理解可变与不可变变量在传感器数据中的用途。
*   掌握基础类型与类型推断的实践方式。
*   认识类型安全在嵌入式系统中的意义。

## 1. 定义环境参数 (变量)

现实世界的数据千变万化。
*   有些是固定的（如设备ID），用 `let`。
*   有些是波动的（如实时温度），用 `var`。

```cangjie
main() {
    // 设备元数据
    let deviceId: String = "SENSOR-001"
    let location = "Living Room" // 自动推断为 String

    // 实时监控数据
    var currentTemp: Float64 = 23.5 // 温度需要小数精度
    var humidity: Int64 = 45        // 湿度通常为整数百分比
    var isOnline: Bool = true       // 设备在线状态

    println("=== 设备状态监控 ===")
    println("ID: ${deviceId} | 位置: ${location}")
    println("状态: 在线(${isOnline}) | 温度: ${currentTemp}°C | 湿度: ${humidity}%")

    // 模拟数据变化
    currentTemp = 24.2
    println("更新温度: ${currentTemp}°C")
}
```

## 2. 强类型的意义

为什么仓颉要区分 `Float64` 和 `Int64`？
在嵌入式开发中，资源是宝贵的。类型系统帮助我们在编译阶段就发现“将电压（数字）赋值给日志（文本）”这类逻辑错误，避免系统在运行时崩溃。

```cangjie
// currentTemp = "Error" // ❌ 编译器拦截：防止脏数据污染系统
```

代码要点：

`let` 声明不可变数据，适合设备编号、位置等长期不变的信息；`var` 用于实时温湿度等可变状态，避免误把动态值写进常量。
类型推断让代码更简洁，但对关键业务指标仍建议显式标注类型，减少单位或精度混用的风险。
日志中的字符串模板 `${}` 支持直接嵌入表达式，能把状态快照一次性输出为清晰的运行记录。

## 工程化提示

*   传感器数据建议统一单位与采样周期，避免误读。
*   在线状态等布尔值应集中管理，便于故障诊断。
*   类型检查能提前阻断脏数据，建议保留严格编译选项。

## 小试身手

1. 为 `humidity` 增加报警阈值判断并输出提示。
2. 增加 `lastUpdatedAt` 字段（字符串占位即可），记录数据更新时间。
